FROM kalilinux/kali-rolling:latest

# Install required tools (most already in Kali)
RUN apt-get update && apt-get install -y \
    nmap \
    curl \
    netcat-traditional \
    jq \
    dnsutils \
    iputils-ping \
    xmlstarlet \
    && rm -rf /var/lib/apt/lists/*

# Copy pentesting script
COPY pentesting.sh /usr/local/bin/pentesting.sh
RUN chmod +x /usr/local/bin/pentesting.sh

# Create output directory
RUN mkdir -p /pentest-output

# Set working directory
WORKDIR /pentest-output

# Run script with arguments passed at runtime
ENTRYPOINT ["/usr/local/bin/pentesting.sh"]
