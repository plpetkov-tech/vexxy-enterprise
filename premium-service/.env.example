# Service Configuration
SERVICE_NAME=premium-vex-service
VERSION=0.1.0
ENVIRONMENT=development

# API Settings
API_HOST=0.0.0.0
API_PORT=8001
API_PREFIX=/api/v1

# Database
DATABASE_URL=postgresql://vexxy:vexxy@localhost:5432/vexxy_premium
DATABASE_POOL_SIZE=5
DATABASE_MAX_OVERFLOW=10

# Redis
REDIS_URL=redis://localhost:6379/0

# Celery
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0
CELERY_TASK_TIME_LIMIT=1800
CELERY_TASK_SOFT_TIME_LIMIT=1500

# Kubernetes
K8S_SANDBOX_NAMESPACE=vexxy-sandbox
K8S_JOB_TTL_SECONDS=600
K8S_IN_CLUSTER=false

# Sandbox Resources
SANDBOX_CPU_LIMIT=2
SANDBOX_MEMORY_LIMIT=4Gi
SANDBOX_CPU_REQUEST=1
SANDBOX_MEMORY_REQUEST=2Gi

# Analysis Settings
DEFAULT_ANALYSIS_TIMEOUT=900
MAX_ANALYSIS_TIMEOUT=1800

# Storage
STORAGE_BACKEND=local
STORAGE_PATH=/tmp/vexxy-premium

# S3 (if using)
# S3_BUCKET=vexxy-premium-evidence
# S3_ACCESS_KEY=your-access-key
# S3_SECRET_KEY=your-secret-key
# S3_ENDPOINT=https://s3.amazonaws.com

# Authentication (JWT)
# IMPORTANT: Premium service ONLY verifies tokens, never creates them
# Tokens are created by the core service
JWT_ALGORITHM=RS256  # Must match core service (RS256 recommended)

# For RS256 (asymmetric - recommended):
JWT_PUBLIC_KEY_PATH=/app/secrets/jwt_public.pem
# Public key is shared from core service via Kubernetes secret

# For HS256 (symmetric - backward compatibility only):
# JWT_SECRET_KEY=your-jwt-secret-min-32-chars (MUST match core)

# VEXxy Core Integration (REQUIRED)
# Premium service communicates with core service for:
# - Sending subscription status updates (webhooks)
# - Syncing organization/user data
VEXXY_BACKEND_URL=http://localhost:8000
# Service API key for premium->core webhook authentication
# Generate with: openssl rand -base64 32
# MUST match VEXXY_SERVICE_API_KEY in core service
VEXXY_API_KEY=

# Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json

# Premium Features (ENABLED BY DEFAULT IN ENTERPRISE)
PREMIUM_ANALYSIS_ENABLED=true
BILLING_ENABLED=true

# Stripe Billing (optional)
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
